(this["webpackJsonpwatched-tvshows-tracker"]=this["webpackJsonpwatched-tvshows-tracker"]||[]).push([[0],{31:function(e,t,a){},34:function(e,t,a){e.exports=a(55)},42:function(e,t,a){},43:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(33),l=a.n(o),r=a(10),s=(a(42),a(4)),i=a(3),m=a(56),u=(a(43),a(31),function(e){var t=e.LoginUser,a=e.loginUserErr,o=Object(n.useState)(""),l=Object(s.a)(o,2),i=l[0],m=l[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),h=d[0],p=d[1],f=Object(n.useState)(null),E=Object(s.a)(f,2),v=E[0],b=E[1],g=Object(n.useState)(null),w=Object(s.a)(g,2),j=w[0],O=w[1];Object(n.useEffect)((function(){a&&b(a)}),[a]);return c.a.createElement("div",{className:"form-container"},c.a.createElement("div",{className:"loginContainer"},c.a.createElement("h3",null,"Please login to continue."),c.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),""!==i?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(i)?""!==h?/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/i.test(h)?(t({email:i,password:h}),m(""),p("")):O("Password must contain minimum eight of characters, at least one letter, one number and one special character"):O("Required"):b("Invalid email address"):b("Required")}},c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{value:i,type:"text",name:"text",id:"text",placeholder:"Email",onChange:function(e){b(""),m(e.target.value)}}),v&&c.a.createElement("h5",{style:{color:"red"}},v)),c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{value:h,type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){O(""),p(e.target.value)}}),j&&c.a.createElement("h5",{style:{color:"red"}},j)),c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-block"})),c.a.createElement("div",{className:"form-control"},c.a.createElement("div",{className:""},c.a.createElement(r.b,{to:"/signup",className:"link"},"Register"))))))}),d=function(e){var t=e.CreateUser,a=e.createUserErr,o=Object(n.useState)(""),l=Object(s.a)(o,2),i=l[0],m=l[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),h=d[0],p=d[1],f=Object(n.useState)(""),E=Object(s.a)(f,2),v=E[0],b=E[1],g=Object(n.useState)(null),w=Object(s.a)(g,2),j=w[0],O=w[1],S=Object(n.useState)(null),N=Object(s.a)(S,2),k=N[0],I=N[1],C=Object(n.useState)(null),y=Object(s.a)(C,2),x=y[0],A=y[1];return Object(n.useEffect)((function(){a&&O(a)}),[a]),c.a.createElement("div",{className:"form-container"},c.a.createElement("div",{className:"loginContainer"},c.a.createElement("h3",null,"Register with Show Tracker"),c.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),""!==i?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(i)?""!==h?h===v?/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/i.test(h)?(t({email:i,password:h}),m(""),p(""),b("")):A("Password must contain minimum eight of characters, at least one uppercase letter, one lowercase letter and one number"):A("Password does not match"):I("Required"):O("Invalid email address"):O("Required")}},c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{value:i,type:"text",name:"text",id:"text",placeholder:"Email",onChange:function(e){O(""),m(e.target.value)}}),j&&c.a.createElement("h5",{style:{color:"red"}},j)),c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{value:h,type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){I(""),p(e.target.value)}}),k&&c.a.createElement("h5",{style:{color:"red"}},k)),c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{value:v,type:"password",name:"password",id:"confirmpassword",placeholder:"Confirm Password",onChange:function(e){A(""),b(e.target.value)}}),x&&c.a.createElement("h5",{style:{color:"red"}},x)),c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-block"})),c.a.createElement("div",{className:"form-control"},c.a.createElement("div",{className:""},c.a.createElement(r.b,{to:"/",className:"link"},"Login"))))))},h=a(27),p=a(26),f=a.n(p),E=function(e){var t=e.type,a=e.movie,o=e.removeShow,l=e.addShow,r=e.user,i=(e.checkEpiChange,Object(n.useState)([])),u=Object(s.a)(i,2),d=(u[0],u[1]),p=Object(n.useState)(!1),E=Object(s.a)(p,2),v=E[0],b=E[1],g=Object(n.useState)(!1),w=Object(s.a)(g,2),j=(w[0],w[1],Object(n.useState)()),O=Object(s.a)(j,2),S=(O[0],O[1],Object(n.useState)(0)),N=Object(s.a)(S,2),k=(N[0],N[1],Object(n.useState)("")),I=Object(s.a)(k,2),C=I[0],y=I[1],x=Object(n.useState)(0),A=Object(s.a)(x,2),_=A[0],L=A[1],P=Object(n.useState)(0),Z=Object(s.a)(P,2),R=Z[0],U=Z[1],$=Object(n.useState)(""),F=Object(s.a)($,2);F[0],F[1];Object(n.useEffect)((function(){r&&(d(r.watchedEpisodes),W(a))}),[r]),Object(n.useEffect)((function(){T()}),[a]);var T=function(){for(var e=r.favouriteShows,t=0;t<e.length;t++)if(e[t]===a._id)return void b(!0);b(!1)},W=function(e){var t=e._id;r.watchedShows&&(r.watchedShows.includes(t)?r.watchedShowsEpisodes.map((function(e){var a=e[t];if(a&&a.showId===t){var n=a.episodeIndex;R<n&&U(n)}})):_<e.episodes.length&&(y(e.episodes[0].title),L(_)))};Object(n.useEffect)((function(){if(R){var e=a.episodes,t=e.length;_<t&&(L(R),y(R<t?e[R].title:e[R-1].title))}}),[R]);return c.a.createElement("div",{className:"inner-card-controls"},"watchlist"===t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"}},c.a.createElement("div",{className:"ctrl-btn",onClick:function(){return function(e){v?o(e):l(e),b(!v)}(a)}},c.a.createElement(f.a,{content:v?"Remove Show from favourite":"Add show to favourite"},v?c.a.createElement(h.c,null):c.a.createElement(h.b,null))),c.a.createElement("div",null,c.a.createElement(f.a,{content:_<a.episodes.length?"Mark ".concat(C," as watched"):"All episodes watched"},c.a.createElement("button",{className:"ctrl-btn",onClick:function(){return function(e,t,n){if(n<e.episodes.length){L(++n),a.episodes[n]&&y(a.episodes[n].title);var c={userId:r._id,showId:e._id,show:e.title,episode:t,episodeIndex:n};m.a.post("http://localhost:8080/api/postwatchedepi",c).then((function(e){})).catch((function(e){console.log(e)}))}}(a,C,_)}},c.a.createElement(h.a,null))),c.a.createElement(f.a,{content:_<a.episodes.length?"Next Episode to watch: ".concat(C):"Well done \ud83e\udd70"},c.a.createElement("div",{className:"nextEpisode"},C))))))},v=function(e){var t=e.movie,a=e.type,n=e.addShow,o=e.removeShow,l=e.updateWatchedEpi,r=e.user,s=e.checkEpiChange;return c.a.createElement("div",{className:"movie-card"},c.a.createElement("div",{className:"overlay"}),c.a.createElement("img",{src:t.poster_path,alt:"".concat(t.title," Poster")}),c.a.createElement(E,{type:a,movie:t,addShow:n,removeShow:o,updateWatchedEpi:l,user:r,checkEpiChange:s}))},b=(a(53),function(e){var t=e.addShow,a=e.removeShow,n=e.allShows,o=e.updateWatchedEpi,l=e.user,r=e.checkEpiChange;return c.a.createElement("div",{className:"movie-page"},c.a.createElement("div",{className:"showsContainer"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"heading"},"Available Shows")),n.length>0?c.a.createElement("div",{className:"movie-grid"},n.map((function(e){return c.a.createElement(v,{movie:e,key:e._id,type:"watchlist",addShow:t,removeShow:a,updateWatchedEpi:o,user:l,checkEpiChange:r})}))):c.a.createElement("h2",{className:"no-movies"},"Currently no movies available! Add some!")))}),g=(a(54),function(e){var t=e.handleLogout;return c.a.createElement("header",null,c.a.createElement("div",{className:"headerContainer"},c.a.createElement("div",{className:"innerContainer"},c.a.createElement("div",{className:"showT"},c.a.createElement(r.b,{to:"/"},"ShowsTracker")),c.a.createElement("ul",{className:"navbarLinks"},c.a.createElement("li",null,c.a.createElement("button",{className:"btn btn-main",onClick:t},"Log Out"))))))});var w=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)([]),r=Object(s.a)(l,2),h=r[0],p=r[1],f=Object(n.useState)(!0),E=Object(s.a)(f,2),v=E[0],w=(E[1],Object(n.useState)("")),j=Object(s.a)(w,2),O=j[0],S=j[1],N=Object(n.useState)(""),k=Object(s.a)(N,2),I=k[0],C=k[1],y=Object(i.o)(),x=function(e){var t={params:{_id:e}};m.a.get("http://localhost:8080/api/getuser",t).then((function(e){o(e.data.user)})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){var e=localStorage.getItem("token"),t=window.localStorage.getItem("userId");e&&x(t)}),[]),Object(n.useEffect)((function(){A()}),[]);var A=function(){m.a.get("http://localhost:8080/api/getshows").then((function(e){p(e.data)})).catch((function(e){console.log(e)}))};return c.a.createElement("div",null,a&&c.a.createElement(g,{handleLogout:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("userId"),m.a.get("http://localhost:8080/api/logout").then((function(e){o(null),y("/")})).catch((function(e){console.log("Logout error",e)}))}}),c.a.createElement(i.c,null,!a&&c.a.createElement(i.a,{path:"/",element:c.a.createElement(u,{LoginUser:function(e){m.a.post("http://localhost:8080/api/login",e).then((function(e){o(e.data.user),localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.user._id),y("/home")})).catch((function(e){C("Email & password do not match.")}))},loginUserErr:I})}),!a&&c.a.createElement(i.a,{path:"/signup",element:c.a.createElement(d,{CreateUser:function(e){m.a.post("http://localhost:8080/api/signup",e).then((function(e){e.data.error?S(e.data.error):(localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),x(e.data.userId),y("/home"))})).catch((function(e){console.log(e)}))},createUserErr:O})}),a&&c.a.createElement(i.a,{exact:!0,path:"/home",element:c.a.createElement(b,{addShow:function(e){m.a.post("http://localhost:8080/api/addshow",{userId:a._id,movieId:e._id}).then((function(e){x()})).catch((function(e){console.log(e)}))},removeShow:function(e){m.a.post("http://localhost:8080/api/removeshow",{userId:a._id,movieId:e._id}).then((function(e){x()})).catch((function(e){console.log(e)}))},allShows:h,user:a,checkEpiChange:v})})))},j=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,57)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),o(e),l(e)}))};l.a.createRoot(document.getElementById("root")).render(c.a.createElement(r.a,null,c.a.createElement(w,null))),j()}},[[34,1,2]]]);
//# sourceMappingURL=main.17199b14.chunk.js.map